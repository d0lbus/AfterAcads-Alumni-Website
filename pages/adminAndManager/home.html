<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>
    <link
      rel="stylesheet"
      href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css"
    />
    <link rel="stylesheet" href="../../style/adminAndManager/home.css" />
    <script src="script.js" defer></script>
  </head>

  <body>
    <section>
      <header>
        <div>
          <img
            class="afteracadstext"
            src="../../assets/logo.png"
            alt="AfterAcads"
          />
        </div>
        <ul class="nav-links">
          <li><a href="home.html">Home</a></li>
          <li><a href="Registrants.html">Registrants</a></li>
          <li><a href="approvePost.html">Posts</a></li>
          <li><a href="eventsDashboard.html">Events</a></li>
          <li><a href="opportunities.html">Opportunities</a></li>
          <li><a href="statistics.html">Statistics</a></li>
          <li id = "usersNav"><a href="user.html">Users</a></li>
      </ul>
      <div class="profile">
          <li><a href="managerProfile.html"><img class="profile-img" src="../../assets/profileIcon.jpg"
                      alt="Profile" /></a></li>
      </div>
      </header>

      <!-- Main Content Section -->
      <div class="main-content">
        <div class="content-container">
          <div class="box-wrapper">
            <div class="left-side">
              <div class="box registrants">
                <div class="container-number">
                  <span>2</span>
                </div>
                <h3>Registrants</h3>
                <a
                  href="Registrants.html"
                  class="icon-link"
                >
                  <i class="las la-arrow-right"></i>
                </a>
              </div>
              <div class="box posts">
                <div class="container-number">
                  <span>2</span>
                </div>
                <h3>Posts</h3>
                <a
                  href="approvePost.html"
                  class="icon-link"
                >
                  <i class="las la-arrow-right"></i>
                </a>
              </div>
              <div class="box events">
                <div class="container-number">
                  <span>4</span>
                </div>
                <h3>Events</h3>
                <a
                  href="eventsDashboard.html"
                  class="icon-link"
                >
                  <i class="las la-arrow-right"></i>
                </a>
              </div>
              <div class="box opportunities">
                <div class="container-number">
                  <span>9</span>
                </div>
                <h3>Opportunities</h3>
                <a
                  href="opportunities.html"
                  class="icon-link"
                >
                  <i class="las la-arrow-right"></i>
                </a>
              </div>
              <div class="box opportunities" id="usersBox">
                <div class="container-number">
                  <span>1</span>
                </div>
                <h3>Users</h3>
                <a
                  href="user.html"
                  class="icon-link"
                >
                  <i class="las la-arrow-right"></i>
                </a>
              </div>
            </div>

            <div class="box statistics">
              <h3>Statistics</h3>
              <a href="statistics.html" class="icon-link">
                <i class="las la-arrow-right"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script>
    document.querySelectorAll('.icon-link').forEach(icon => {
        icon.addEventListener('click', function(e) {
        e.preventDefault(); // Prevent the default link behavior

        // Apply fade and zoom-out effect on the current page
        document.body.classList.add('fade-zoom-out');

        // After the transition, navigate to the new page
        setTimeout(() => {
          const link = this.href; // Get the destination link
          window.location.href = link; // Navigate to the next page
        }, 500); // Wait for the transition to complete (500ms)
      });
  });
    
    // Fetch user details from the backend
    fetch('/api/users/details')
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to fetch user details');
        }
        return response.json();
      })
      .then(user => {
        // Hide the "Users" section if the user is a manager
        if (user.userType === 'manager') {
          document.getElementById('usersNav').style.display = 'none'; // Hide nav link
          document.getElementById('usersBox').style.display = 'none'; // Hide box
        }
      })
      .catch(error => {
        console.error('Error:', error);
        // Redirect to login page if not logged in
        window.location.href = '/adminAndManager/login.html';
      });
    

    </script>
  </body>
</html>
